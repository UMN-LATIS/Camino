<?php

namespace Database\Seeders;

use App\Stop;
use Illuminate\Database\Seeder;
use App\Tour;
// use Grimzy\LaravelMysqlSpatial\Types\Point;
use MatanYadaev\EloquentSpatial\Objects\Point;
class StoneArchTourSeeder extends Seeder
{
    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run()
    {
        $tour = Tour::create([
            'active' => 1,
            'public' => 1,
            'title' => 'Stone Arch Bridge',
            'tour_content' => json_decode('{"hotWords": [], "languages": ["English"], "use_template": true, "custom_base_map": {"image": null, "coords": {"upperleft": {"lat": null, "lng": null}, "lowerright": {"lat": null, "lng": null}}, "use_basemap": false}}'),
            'start_location' => new Point(44.98079, -93.25324),
            'geocoded' => json_decode('{"city": "Minneapolis", "state": "Minnesota", "country": "United States", "locality": "Minneapolis", "postalCode": "55414", "neighborhood": "Marcy Holmes"}'),
            'template' => 0,
            'driving' => 0,
            'biking' => 0,
            'walking' => 1,
            'style' => 'entire_tour',
        ]);

        $stops = [
            [
                'sort_order' => 0,
                'stop_content' => json_decode('{"title":{"English":"Start","placeholder":null},"stages":[{"type":"language"},{"text":{"English":"This tour of the Stone Arch Bridge and St. Anthony Main will take you on a trip through Minnesota history, from its geological origins through the modern day.\\n\\nYou\'ll start the tour in the middle of the Stone Arch Bridge, then continue on a loop of St. Anthony Main, the Hennepin Avenue Bridge, and West River Parkway. You can park on either side of the river - there\'s a lot just north of the bridge on the downtown side of the bridge, and plenty of street parking on the St. Anthony Main side.\\n\\nUse the \\"next\\" button in the upper right to move to the next stop. Each stop will include navigation instructions, as well as informational material.\\n\\nAs you move through your tour, you might come across \\"hotwords\\". These are underlined words that you can tap to mark. At the end of your tour, we\'ll give you a list of the words you marked, with additional information so you can dive deeper.\\n\\nAlong the way, you\'ll see some interpretive signage from the St. Anthony Falls Heritage Trail. These have some great photos and additional details, so be sure to check them out.","placeholder":null},"type":"guide"}],"header_image":{"src":"7pio7HlGj0rWOEnlOquPiearia2AN8NmJAQz0mN4.jpg","alt":null}}'),
            ], [
                'sort_order' => 1,
                'stop_content' => json_decode('{"title": {"English": "Stone Arch Bridge", "placeholder": null}, "stages": [{"text": {"English": "Navigation"}, "type": "separator"}, {"text": {"English": "Head to the middle of the bridge. Stop somewhere with a good view of the falls.\\n\\nOn a beautiful summer weekend, the bridge can be very busy, so be sure to stay out of the bike lanes!", "placeholder": null}, "type": "navigation", "route": [{"lat": 44.9808, "lng": -93.2532}], "buttonTitle": {"English": "Show Map"}, "targetPoint": {"lat": 44.9808, "lng": -93.2532}}, {"text": {"English": "Get your bearings"}, "type": "separator"}, {"text": {"English": "The Stone Arch Bridge was built in 1883 by railroad tycoon <hotword>James J. Hill</hotword>. The bridge was built to link the flour milling operations of Minneapolis with the agricultural field of the Dakotas and the river shipping terminals of St. Paul. The bridge closed to trains in 1978 and became a pedestrian bridge in 1994.\\n\\nBefore we dive into our tour, take some time to orient yourself. Facing the waterfall, downtown Minneapolis is to your left. To your right, the commercial district along the river is called St. Anthony Main. St. Anthony was originally a separate city, and was annexed in 1872 creating a neighborhood called \\"northeast\\". \\n\\nIf you turn around, you\'ll be looking southeast, where the river flows under the <hotword>35W bridge</hotword> and past the University of Minnesota, before continuing into St. Paul on its way to the Gulf of Mexico.\\n\\nUse the \\"Look Around\\" button below for an Augmented Reality view of the area.", "placeholder": null}, "type": "guide"}, {"text": {"placeholder": null}, "type": "ar", "waypoints": [{"text": {"English": "St. Anthony Falls", "placeholder": null}, "altitude": null, "location": {"lat": 44.98142, "lng": -93.25527}}, {"text": {"English": "St. Anthony Main", "placeholder": null}, "altitude": null, "location": {"lat": 44.98293, "lng": -93.25176}}, {"text": {"English": "Guthrie Theater", "placeholder": null}, "altitude": null, "location": {"lat": 44.97821, "lng": -93.25552}}, {"text": {"English": "35W Bridge", "placeholder": null}, "altitude": null, "location": {"lat": 44.97895, "lng": -93.24519}}, {"text": {"English": "University of Minnesota", "placeholder": null}, "altitude": "500", "location": {"lat": 44.97656, "lng": -93.23507}}], "buttonTitle": {"English": "Look Around"}}, {"text": {"English": "About St. Anthony Falls", "placeholder": null}, "type": "separator"}, {"text": {"English": "The waterfall in front of you is, with little exaggeration, the reason that Minneapolis exists. The 50 foot drop the river makes at this spot provided the power to run lumber mills, flour mills, and later, hydroelectric power plants.\\n\\nSt. Anthony Falls hasn\'t always looked the way it does today, and it hasn\'t always been where it is today. When Europeans first arrived in the area in the late 17th century, the falls were hundreds of feet downriver (well behind you as you face the falls). Made of <hotword>hard limestone on stop of soft sandstone</hotword>, the falls were rapidly eroding their way upriver.\\n\\nBeginning in the 19th century, industrialists identified the need to prevent the falls from continuing their natural erosion. The dam you see today was built in 1963\\\\. Check out the photos below for a view of the falls before they were tamed.", "placeholder": null}, "type": "guide"}, {"type": "gallery", "images": [{"src": "AHCI0pe9aT58PAxKDOULreUaXgBjsBU6UaBMr5a2.jpg", "text": {"English": "1863 View - Hennepin County Library", "placeholder": null}}, {"src": "3FsWPZoWT54VZkTNqKJcYfIxEIUlfmuFW9LR4CcS.jpg", "text": {"English": "1865 View, including a lumber mill. Hennepin County Library", "placeholder": null}}, {"src": "qBxqO1trAOoOUwjfYbllN3DPemHghqz1YZSaLF1j.jpg", "text": {"English": "1870s, after the construction of the first apron to protect the falls. Hennepin County Library", "placeholder": null}}]}]}'),
            ], [
                'sort_order' => 2,
                'stop_content' => json_decode('{"title": {"English": "Lock and Dam", "placeholder": null}, "stages": [{"text": {"English": "Navigation"}, "type": "separator"}, {"text": {"English": "Facing the falls, turn left and head towards downtown Minneapolis. Stop when the walkway widens a little bit, and the railing separating the bike lanes from the walkway begins.", "placeholder": null}, "type": "navigation", "route": [{"lat": 44.9808, "lng": -93.2532}, {"lat": 44.9805, "lng": -93.25538}], "buttonTitle": {"English": "Show Map"}, "targetPoint": {"lat": 44.9805, "lng": -93.25538}}, {"text": {"English": "Guide"}, "type": "separator"}, {"text": {"English": "Notice how this section of the bridge is a little different? This \\"arch\\" of the Stone Arch Bridge was removed to make way for boat traffic using the lock and dam system that\'s in front of you now. The lock and dam were completed in 1963, allowing commercial traffic to continue upriver for the first time, allowing for the creation of the <hotword>Upper Harbor Terminal</hotword>. \\n\\nThe lock was closed in 2015 to prevent the spread of the invasive Asian carp. \\n\\nThe lock has a visitor center with exhibits about how locks work, and offers tours. It\'s currently closed due to covid-19, but is well worth a visit in the future.", "placeholder": null}, "type": "guide"}]}'),
            ], [
                'sort_order' => 3,
                'stop_content' => json_decode('{"title": {"English": "First Street and Mill Ruins", "placeholder": null}, "stages": [{"text": {"English": "Navigation"}, "type": "separator"}, {"text": {"English": "Step carefully across the bike lane to the other side of the bridge, and then continue until you\'ve got a good look at the ruins down below.", "placeholder": null}, "type": "navigation", "route": [{"lat": 44.9805, "lng": -93.25538}, {"lat": 44.980319554332354, "lng": -93.25634121894835}, {"lat": 44.98039, "lng": -93.25734000000001}], "buttonTitle": {"English": "Show Map"}, "targetPoint": {"lat": 44.98039, "lng": -93.25734000000001}}, {"text": {"English": "Water Power"}, "type": "separator"}, {"text": {"English": "We\'ve talked a lot about the falls and the mills that they powered. But how did that actually work? After all, mills were built at this spot long before electricity. \\n\\nTo power a mill from a waterfall, you begin by digging a canal above the falls. Water flows along this canal, and then enters a mill, where it drops down a long shaft. At the bottom of that shaft is a <hotword>turbine</hotword>, which spins as the water flows through it. A shaft leads up from the turbine into the mill, and from there belts and gears drive the machinery of the mill. Finally, the water leaves the mill through a tailrace, having dropped back to the new level of the river. \\n\\nWhat you see before you are the ruins of a number of mills and the tailrace leading back to the river. We\'ll see the start of the canal a bit later on. This part of the river was once lined with a number of small mills. The twisted iron once supported a railway trestle to allow the mills to easily load and unload.", "placeholder": null}, "type": "guide"}, {"type": "gallery", "images": [{"src": "4DIXfYGabhMNwKv781owhpoVXRN1VwUpfYWyozFe.jpg", "text": {"English": "View of the milling district, showing the railway trestle and small mills. Minnesota Historical Society.", "placeholder": null}}]}]}'),
            ], [
                'sort_order' => 4,
                'stop_content' => json_decode('{"title": {"English": "Mill Ruins Park", "placeholder": null}, "stages": [{"text": {"English": "Navigation"}, "type": "separator"}, {"text": {"English": " Continue until the end of the bridge, then turn left cross over to the sign that says Mill Ruins Park.", "placeholder": null}, "type": "navigation", "route": [{"lat": 44.98039, "lng": -93.25734000000001}, {"lat": 44.980566264313815, "lng": -93.25804710388185}, {"lat": 44.98079772114858, "lng": -93.25873911380768}, {"lat": 44.98059, "lng": -93.25887}], "buttonTitle": {"English": "Show Map"}, "targetPoint": {"lat": 44.98059, "lng": -93.25887}}, {"text": {"English": "Guide"}, "type": "separator"}, {"text": {"English": "If you\'ve got some extra time, you can take the walking path immediately to the left of the bride to continue down to Mill Ruins Park, where you can explore the ruins and the tailraces. This is also the path to get to the lock visitor center. The large stone donut near the sign for the park is a milling stone, used to grind wheat into flour.\\n\\nLook to the south - it\'s hard to miss the Washburn A Flour Mill, with the Gold Medal Flour sign. Once the biggest flour mill in the world, today it is home to the fantastic Mill City Museum. The museum offers an in-depth look at the history of flour milling, as well as tours and a great view.\\n\\nYou might also spot the wood plans that make up the pedestrian path. The canal that powered the mills on this side of the river ran directly underneath what is now West River Parkway. It was covered with thick planks, allowing truck and rail traffic to reach the mills.", "placeholder": null}, "type": "guide"}, {"type": "gallery", "images": [{"src": "vEaQUdBWiUDLAgRR9HYASgPmcOyyaUmjjp5LrQWV.jpg", "text": {"English": "Mill District including Washburn A Mill, 1933. Hennepin County Library", "placeholder": null}}]}]}'),
            ], [
                'sort_order' => 5,
                'stop_content' => json_decode('{"title": {"English": "Headrace", "placeholder": null}, "stages": [{"text": {"English": "Navigation"}, "type": "separator"}, {"text": {"English": "Head upriver, across the parking lot at the end of the Stone Arch Bridge. At the northern edge of the parking lot, you can see the headrace.", "placeholder": null}, "type": "navigation", "route": [{"lat": 44.98059, "lng": -93.25887}, {"lat": 44.98116, "lng": -93.25948}], "buttonTitle": {"English": "Show Map"}, "targetPoint": {"lat": 44.98116, "lng": -93.25948}}, {"type": "gallery", "images": [{"src": "A8s7sUObe3pmKA599Bbk1BOQw0c1Ha2MUWs1XwXx.jpg", "text": {"English": "The headrace as it exists today", "placeholder": null}}]}, {"text": {"English": "Headrace History"}, "type": "separator"}, {"text": {"English": "We\'ve already seen the tailraces, where water re-entered the river after providing power to the mills. You\'re now standing at the headrace, where water entered the canal that fed all the mills. Notice that you\'re standing above the falls now, so the water entering the canal here is much higher than where it exits. \\n\\nUnderneath the parking lot, more history lies waiting for the future. The gatehouse, a building that managed the flow of the water in the canal, was demolished during the construction of the lock and dam in the 1960s. But much of it remains, buried under the modern parking lot. Historians hope to one day excavate and restore the structure.", "placeholder": null}, "type": "guide"}]}'),
            ], [
                'sort_order' => 6,
                'stop_content' => json_decode('{"title": {"English": "Hennepin Avenue Bridge", "placeholder": null}, "stages": [{"text": {"English": "Navigation"}, "type": "separator"}, {"text": {"English": "This is the longest hike of the tour. Keep walking upriver towards the Hennepin Avenue Bridge. Along the way, you\'ll pass the main Minneapolis Post Office on your left. It\'s hard to miss - it\'s one of the biggest buildings in the Twin Cities. There\'s no truth to the rumor that bi-planes landed on the roof for airmail deliveries though.\\n\\nWhen you get to the bridge, look for the large iron anchors underneath. They\'re tough to miss.", "placeholder": null}, "type": "navigation", "route": [{"lat": 44.98116, "lng": -93.25948}, {"lat": 44.981898137193, "lng": -93.26086878776552}, {"lat": 44.98282397950412, "lng": -93.262220621109}, {"lat": 44.98476, "lng": -93.26473}], "buttonTitle": {"English": "Show Map"}, "targetPoint": {"lat": 44.98476, "lng": -93.26473}}, {"text": {"English": "Guide"}, "type": "separator"}, {"text": {"English": "This believed to be the site of the first permanent crossing anywhere on the  Mississippi. The first bridge here was built in 1855\\\\. Later bridges were built in 1876, 1891, and the current bridge in 1990\\\\. This is a major thoroughfare, connecting downtown Minneapolis with what was then the Village of St. Anthony, and today is northeast Minneapolis.", "placeholder": null}, "type": "guide"}, {"type": "gallery", "images": [{"src": "0b3ZxSKrXCs8b5aoO9xP7kt2PZ6IsNa4e7u8HzSh.jpg", "text": {"English": "First bridge, circa 1865. Minnesota Historical Society", "placeholder": null}}]}]}'),
            ], [
                'sort_order' => 7,
                'stop_content' => json_decode('{"title": {"English": "Nicollete Island", "placeholder": null}, "stages": [{"text": {"English": "Navigation"}, "type": "separator"}, {"text": {"placeholder": null}, "type": "navigation", "route": [{"lat": 44.98476, "lng": -93.26473}, {"lat": 44.9857150228672, "lng": -93.26263904571535}, {"lat": 44.98518411548252, "lng": -93.26182365417479}, {"lat": 44.98563, "lng": -93.26045}], "buttonTitle": {"English": "Show Map"}, "targetPoint": {"lat": 44.98563, "lng": -93.26045}}, {"text": {"English": "Guide"}, "type": "separator"}, {"text": {"placeholder": null}, "type": "guide"}]}'),

            ], [
                'sort_order' => 8,
                'stop_content' => json_decode('{"title": {"English": "Pillsbury A Mill", "placeholder": null}, "stages": [{"text": {"English": "Navigation"}, "type": "separator"}, {"text": {"placeholder": null}, "type": "navigation", "route": [{"lat": 44.98563, "lng": -93.26045}, {"lat": 44.98612451735604, "lng": -93.25860500335695}, {"lat": 44.98536596311135, "lng": -93.25763940811156}, {"lat": 44.9836, "lng": -93.25328}], "buttonTitle": {"English": "Show Map"}, "targetPoint": {"lat": 44.9836, "lng": -93.25328}}, {"text": {"English": "Guide"}, "type": "separator"}, {"text": {"placeholder": null}, "type": "guide"}]}'),
            ], [
                'sort_order' => 9,
                'stop_content' => json_decode('{"title": {"English": "Finish", "placeholder": null}, "stages": [{"text": {"English": "You\'ve made it to the end of the tour. We hope you enjoyed this experience. Please leave us feedback on your experience.", "placeholder": null}, "type": "guide"}, {"text": {"placeholder": null}, "type": "feedback"}, {"text": {"English": "Hotwords"}, "type": "separator"}, {"text": {"English": "Enter your email below to have a copy of this content emailed to you.", "placeholder": null}, "type": "hotwords-summary", "request_email": true}]}'),
            ],
        ];

        collect($stops)->each(function ($stopProps) use ($tour) {
            $stop = new Stop($stopProps);
            $tour->stops()->save($stop);
        });
    }
}
